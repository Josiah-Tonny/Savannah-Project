import{c as L,u as y,a as F,j as e,L as o,F as I,P as O,T as U,b as $,C as P,d as R,e as q,r as c,S as D,f as u,g as _,h as B,i as M,k as C,l as Q,M as T,m as K,N as z,n as J,Q as W,o as V,B as Y,R as H,p as m,q as G}from"./vendor-8wU_ZrND.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}})();const p=L(s=>({user:null,loading:!1,error:null,signIn:async(t,i)=>{try{s({loading:!0,error:null});const r={_id:"1",email:t,watchlist:[],recommendations:[]};localStorage.setItem("user",JSON.stringify(r)),s({user:r,loading:!1})}catch(r){s({error:r.message,loading:!1})}},signUp:async(t,i)=>{try{s({loading:!0,error:null});const r={_id:"1",email:t,watchlist:[],recommendations:[]};localStorage.setItem("user",JSON.stringify(r)),s({user:r,loading:!1})}catch(r){s({error:r.message,loading:!1})}},signOut:()=>{localStorage.removeItem("user"),s({user:null})},setUser:t=>s({user:t,loading:!1})})),X=()=>{const{user:s,signOut:t}=p(),i=y(),r=F(),a=async()=>{await t(),i("/auth")},l=n=>r.pathname===n;return e.jsx("nav",{className:"bg-gray-800 shadow-lg sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs(o,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(I,{className:"w-8 h-8 text-blue-500"}),e.jsx("span",{className:"text-xl font-bold",children:"MovieMate"})]}),s&&e.jsxs("div",{className:"hidden md:flex space-x-6",children:[e.jsxs(o,{to:"/movies",className:`flex items-center space-x-1 hover:text-blue-500 ${l("/movies")?"text-blue-500":"text-gray-300"}`,children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Movies"})]}),e.jsxs(o,{to:"/series",className:`flex items-center space-x-1 hover:text-blue-500 ${l("/series")?"text-blue-500":"text-gray-300"}`,children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:"Series"})]}),e.jsxs(o,{to:"/most-watched",className:`flex items-center space-x-1 hover:text-blue-500 ${l("/most-watched")?"text-blue-500":"text-gray-300"}`,children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"Most Watched"})]}),e.jsxs(o,{to:"/latest",className:`flex items-center space-x-1 hover:text-blue-500 ${l("/latest")?"text-blue-500":"text-gray-300"}`,children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{children:"Latest"})]})]})]}),s?e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-gray-300",children:s.email}),e.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-gray-700 transition-colors",children:e.jsx(R,{className:"w-5 h-5"})})]}):e.jsx(o,{to:"/auth",className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:"Sign In"})]})})})},Z="fcd84db73388a25d031e1ece2b6e44e1",ee="https://api.themoviedb.org/3",b=q.create({baseURL:ee,params:{api_key:Z}}),se=async(s=1)=>(await b.get("/movie/popular",{params:{page:s}})).data,te=async(s,t=1)=>(await b.get("/search/movie",{params:{query:s,page:t}})).data,ae=async s=>(await b.get(`/movie/${s}`)).data,re=async s=>(await b.get(`/movie/${s}/credits`)).data,h=L(s=>({movies:[],loading:!1,error:null,currentPage:1,totalPages:1,searchQuery:"",fetchMovies:async(t=1)=>{try{s({loading:!0,error:null});const i=await se(t);s({movies:i.results,currentPage:i.page,totalPages:i.total_pages,loading:!1})}catch(i){s({error:i.message,loading:!1})}},searchForMovies:async(t,i=1)=>{try{s({loading:!0,error:null,searchQuery:t});const r=await te(t,i);s({movies:r.results,currentPage:r.page,totalPages:r.total_pages,loading:!1})}catch(r){s({error:r.message,loading:!1})}}})),A=()=>{const[s,t]=c.useState(""),{searchForMovies:i,fetchMovies:r}=h(),a=l=>{l.preventDefault(),s.trim()?i(s):r(1)};return e.jsx("form",{onSubmit:a,className:"w-full max-w-2xl mx-auto mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s,onChange:l=>t(l.target.value),placeholder:"Search for movies...",className:"w-full px-4 py-2 pl-10 bg-gray-800 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(D,{className:"absolute left-3 top-2.5 text-gray-400 w-5 h-5"})]})})},N=({title:s,movies:t,viewAllLink:i})=>e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:s}),e.jsxs(o,{to:i,className:"flex items-center text-blue-500 hover:text-blue-400",children:["View All ",e.jsx(_,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:t.slice(0,5).map(r=>e.jsx(o,{to:`/movie/${r.id}`,className:"group",children:e.jsxs("div",{className:"relative overflow-hidden rounded-lg",children:[e.jsx("img",{src:`https://image.tmdb.org/t/p/w500${r.poster_path}`,alt:r.title||r.name,className:"w-full h-[300px] object-cover transform group-hover:scale-105 transition-transform duration-200"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-end p-4",children:e.jsx("h3",{className:"text-white font-semibold truncate",children:r.title||r.name})})]})},r.id))})]}),le=()=>{const{user:s}=p(),t=y(),{movies:i,fetchMovies:r,loading:a}=h();if(c.useEffect(()=>{if(!s){t("/auth");return}r(1)},[s,t,r]),a)return e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-4rem)]",children:e.jsx(u,{className:"w-8 h-8 animate-spin"})});const l=i.filter(d=>!d.name),n=i.filter(d=>d.name),f=i.slice(0,5),j=i.filter(d=>{var v;return((v=d.genre_ids)==null?void 0:v.includes(16))||!1});return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(A,{}),e.jsx(N,{title:"Movies",movies:l,viewAllLink:"/movies"}),e.jsx(N,{title:"Series",movies:n,viewAllLink:"/series"}),e.jsx(N,{title:"Anime",movies:f,viewAllLink:"/anime"}),e.jsx(N,{title:"Animation",movies:j,viewAllLink:"/animation"})]})},ie=()=>{const{id:s}=B(),{data:t,isLoading:i}=M({queryKey:["movie",s],queryFn:()=>ae(s)}),{data:r,isLoading:a}=M({queryKey:["credits",s],queryFn:()=>re(s)});return i||a?e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsx(u,{className:"w-8 h-8 animate-spin"})}):t?e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("img",{src:`https://image.tmdb.org/t/p/w500${t.poster_path}`,alt:t.title,className:"w-full md:w-1/3 rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:t.title}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"w-5 h-5 text-yellow-400 mr-1"}),e.jsx("span",{children:t.vote_average.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"w-5 h-5 mr-1"}),e.jsxs("span",{children:[t.runtime," min"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"w-5 h-5 mr-1"}),e.jsx("span",{children:new Date(t.release_date).getFullYear()})]})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t.overview}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Cast"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:r==null?void 0:r.cast.slice(0,5).map(l=>e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:`https://image.tmdb.org/t/p/w200${l.profile_path}`,alt:l.name,className:"w-24 h-24 rounded-full object-cover mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:l.name}),e.jsx("p",{className:"text-sm text-gray-400",children:l.character})]},l.id))})]})]})]})}):null},ne=()=>{const[s,t]=c.useState(!0),[i,r]=c.useState(""),[a,l]=c.useState(""),{signIn:n,signUp:f,loading:j,error:d}=p(),v=y(),k=async g=>{g.preventDefault();try{s?await n(i,a):await f(i,a),v("/")}catch(E){console.error("Authentication error:",E)}};return e.jsx("div",{className:"min-h-[calc(100vh-4rem)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold",children:s?"Sign in to your account":"Create a new account"})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:k,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),e.jsx(T,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:g=>r(g.target.value),className:"appearance-none rounded-t-md relative block w-full px-12 py-3 border border-gray-700 bg-gray-800 placeholder-gray-400 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx(K,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:g=>l(g.target.value),className:"appearance-none rounded-b-md relative block w-full px-12 py-3 border border-gray-700 bg-gray-800 placeholder-gray-400 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]}),d&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:d}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:j,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:j?e.jsx(u,{className:"w-5 h-5 animate-spin"}):s?"Sign In":"Sign Up"})})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>t(!s),className:"text-blue-500 hover:text-blue-400 text-sm font-medium",children:s?"Don't have an account? Sign Up":"Already have an account? Sign In"})})]})})},x=({children:s})=>{const{user:t,loading:i}=p();return i?e.jsx("div",{children:"Loading..."}):t?e.jsx(e.Fragment,{children:s}):e.jsx(z,{to:"/auth"})},w=({id:s,title:t,posterPath:i,overview:r,rating:a})=>e.jsxs(o,{to:`/movie/${s}`,className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-transform hover:scale-105",children:[e.jsx("img",{src:`https://image.tmdb.org/t/p/w500${i}`,alt:t,className:"w-full h-96 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-xl font-bold truncate",children:t}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"w-4 h-4 text-yellow-400 mr-1"}),e.jsx("span",{children:a.toFixed(1)})]})]}),e.jsx("p",{className:"text-gray-400 text-sm line-clamp-3",children:r})]})]}),ce=()=>{const{currentPage:s,totalPages:t,fetchMovies:i,searchQuery:r,searchForMovies:a}=h(),l=n=>{r?a(r,n):i(n)};return e.jsxs("div",{className:"flex justify-center items-center space-x-4 mt-8",children:[e.jsx("button",{onClick:()=>l(s-1),disabled:s===1,className:"p-2 rounded-lg bg-gray-800 disabled:opacity-50",children:e.jsx(J,{className:"w-5 h-5"})}),e.jsxs("span",{children:["Page ",s," of ",t]}),e.jsx("button",{onClick:()=>l(s+1),disabled:s===t,className:"p-2 rounded-lg bg-gray-800 disabled:opacity-50",children:e.jsx(_,{className:"w-5 h-5"})})]})},S=({type:s})=>{const{movies:t,loading:i,fetchMovies:r}=h();if(c.useEffect(()=>{r(1)},[r]),i)return e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-4rem)]",children:e.jsx(u,{className:"w-8 h-8 animate-spin"})});const a=s==="movie"?t.filter(l=>!l.name):t.filter(l=>l.name);return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:s==="movie"?"Movies":"TV Series"}),e.jsx(A,{}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(l=>e.jsx(w,{id:l.id,title:l.title||l.name,posterPath:l.poster_path,overview:l.overview,rating:l.vote_average},l.id))}),e.jsx(ce,{})]})},oe=()=>{const{movies:s,loading:t,fetchMovies:i}=h();if(c.useEffect(()=>{i(1)},[i]),t)return e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-4rem)]",children:e.jsx(u,{className:"w-8 h-8 animate-spin"})});const r=[...s].sort((a,l)=>l.vote_count-a.vote_count);return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Most Watched"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(a=>e.jsx(w,{id:a.id,title:a.title||a.name,posterPath:a.poster_path,overview:a.overview,rating:a.vote_average},a.id))})]})},de=()=>{const{movies:s,loading:t,fetchMovies:i}=h();if(c.useEffect(()=>{i(1)},[i]),t)return e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-4rem)]",children:e.jsx(u,{className:"w-8 h-8 animate-spin"})});const r=[...s].sort((a,l)=>{const n=new Date(a.release_date||a.first_air_date);return new Date(l.release_date||l.first_air_date).getTime()-n.getTime()});return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Latest Releases"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(a=>e.jsx(w,{id:a.id,title:a.title||a.name,posterPath:a.poster_path,overview:a.overview,rating:a.vote_average},a.id))})]})},me=new W;function xe(){const{setUser:s}=p();return c.useEffect(()=>{const t=localStorage.getItem("user");t&&s(JSON.parse(t))},[s]),e.jsx(V,{client:me,children:e.jsx(Y,{children:e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx(X,{}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs(H,{children:[e.jsx(m,{path:"/auth",element:e.jsx(ne,{})}),e.jsx(m,{path:"/",element:e.jsx(x,{children:e.jsx(le,{})})}),e.jsx(m,{path:"/movie/:id",element:e.jsx(x,{children:e.jsx(ie,{})})}),e.jsx(m,{path:"/movies",element:e.jsx(x,{children:e.jsx(S,{type:"movie"})})}),e.jsx(m,{path:"/series",element:e.jsx(x,{children:e.jsx(S,{type:"tv"})})}),e.jsx(m,{path:"/most-watched",element:e.jsx(x,{children:e.jsx(oe,{})})}),e.jsx(m,{path:"/latest",element:e.jsx(x,{children:e.jsx(de,{})})})]})})]})})})}G(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(xe,{})}));
